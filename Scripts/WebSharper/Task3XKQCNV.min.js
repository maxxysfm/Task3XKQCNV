(function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;a=self;b=a.Task3XKQCNV=a.Task3XKQCNV||{};c=b.Dto=b.Dto||{};d=c.Weight=c.Weight||{};e=c.User=c.User||{};f=b.Client=b.Client||{};g=a.StartupCode$Task3XKQCNV$Client=a.StartupCode$Task3XKQCNV$Client||{};h=a.WebSharper;i=h&&h.UI;j=i&&i.Var$1;k=h&&h.Remoting;l=k&&k.AjaxRemotingProvider;m=h&&h.List;n=h&&h.Charting;o=n&&n.Chart;p=n&&n.Pervasives;q=i&&i.Doc;r=n&&n.Renderers;s=r&&r.ChartJs;t=i&&i.AttrProxy;u=h&&h.Seq;v=h&&h.DateUtil;w=h&&h.Operators;x=a.Date;y=a.IntelliFactory;z=y&&y.Runtime;d.New=function(A,B,C){return{Username:A,Weight:B,Published:C};};e.New=function(A,B,C){return{Username:A,Name:B,Password:C};};f.Main=function(){var A,B,C,D,E,F,G,H,I,J,K,L;j.Create$1("");A=j.Create$1("");B=j.Create$1("");C=j.Create$1("");D=j.Create$1("");E=j.Create$1("");F=j.Create$1("");G=j.Create$1("");H=j.Create$1((new a.Date(f.timeNow())).toLocaleString());I=j.Create$1("5");J=(new l.New()).Sync("Task3XKQCNV:Task3XKQCNV.Server.AllWeightsChart:-1363325819",[]);K=m.map(function(M){return[(new a.Date(M.Published)).toLocaleString(),M.Weight];},J);L=o.Line$1(K).__WithTitle("Square numbers").__WithFillColor(new p.Color({$:0,$0:120,$1:120,$2:120,$3:0.2}));return q.Element("div",[],[s.Render$8(L,null,null,null),q.Element("table",[t.Create("id","loginform"),t.Create("border","2"),t.Create("style","margin: auto;\n            width: 80%;\n            padding: 10px;\n            padding-bottom: 70px;\n            margin-bottom: 60px;")],m.ofSeq(u.delay(function(){var M;M=t.Create("style","padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;");return u.append([q.Element("th",[M],[q.Element("h2",[],[q.TextNode("Login")]),q.Element("table",[],[q.Element("tr",[],m.ofSeq(u.delay(function(){var N;N="Username: ";return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode(N)])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("placeholder",N)],B)])];}));}))),q.Element("tr",[],m.ofSeq(u.delay(function(){var N;N="Password: ";return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode(N)])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("type","password"),t.Create("placeholder",N)],C)])];}));})))]),q.Button("Login",[],function(){var N;N=(new l.New()).Sync("Task3XKQCNV:Task3XKQCNV.Server.Login:-662090079",[B.Get(),C.Get()]);B.Get()===""||C.Get()===""?a.alert("Please fill every field on the login screen."):N!=null?(a.alert("Welcome "+N.$0.Name+"!"),self.document.getElementById("loginform").setAttribute("style","display:none"),self.document.getElementById("homepage").setAttribute("style","display:block"),A.Set(N.$0.Name)):a.alert("Invalid username or password!");})])],u.delay(function(){return[q.Element("th",[M],[q.Element("h2",[],[q.TextNode("Register")]),q.Element("table",[],[q.Element("tr",[],m.ofSeq(u.delay(function(){var N;N="Username: ";return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode(N)])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("placeholder",N)],E)])];}));}))),q.Element("tr",[],m.ofSeq(u.delay(function(){var N;N="Display Name: ";return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode(N)])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("placeholder",N)],D)])];}));}))),q.Element("tr",[],m.ofSeq(u.delay(function(){var N;N="Password: ";return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode(N)])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("type","password"),t.Create("placeholder",N)],F)])];}));}))),q.Element("tr",[],m.ofSeq(u.delay(function(){var N;N="Password again: ";return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode(N)])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("type","password"),t.Create("placeholder",N)],G)])];}));})))]),q.Button("Register",[],function(){if(E.Get()===""||D.Get()===""||F.Get()===""||G.Get()==="")a.alert("You must enter a value in every option!");else if(F.Get()!==G.Get())a.alert("Passwords doesn't match.");else if((new l.New()).Sync("Task3XKQCNV:Task3XKQCNV.Server.NameExists:1707812660",[E.Get()]))a.alert("This username is not available! Pick a different username.");else{(new l.New()).Send("Task3XKQCNV:Task3XKQCNV.Server.Register:1351335016",[E.Get(),D.Get(),F.Get()]);a.alert("Registered");}})])];}));}))),q.Element("div",[t.Create("id","homepage"),t.Create("style","display:none;padding-bottom: 20px;padding-top: 20px;")],[q.Element("table",[t.Create("border","2"),t.Create("style","margin: auto;\n                width: 80%;\n                padding: 10px;")],m.ofSeq(u.delay(function(){return[q.Element("th",[t.Create("style","padding-top: 10px;padding-right: 10px;padding-bottom: 10px;padding-left: 10px;")],[q.Element("h2",[],[q.TextNode("Log your weight!")]),q.Element("table",[],[q.Element("tr",[],m.ofSeq(u.delay(function(){return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode("Your name: ")])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("disabled","")],A)])];}));}))),q.Element("tr",[],m.ofSeq(u.delay(function(){return u.append([q.Element("th",[],[q.Element("h3",[],[q.TextNode("Weight to log: ")])])],u.delay(function(){return[q.Element("th",[],[q.Input([t.Create("type","number"),t.Create("min","1"),t.Create("max","500")],I)])];}));}))),q.Element("tr",[],[q.Element("th",[],[q.Element("h3",[],[q.TextNode("")])]),q.Element("th",[],[q.Input([t.Create("disabled",""),t.Create("value",H.Get())],H)])]),q.Element("tr",[],[q.Element("th",[],[q.Element("h3",[],[q.TextNode("Date")])]),q.Element("th",[],[q.Input([t.Create("type","date"),t.Create("min","1980-01-01"),t.Create("max","2100-01-01"),t.Create("value",H.Get())],H)])])]),q.Button("Log weight!",[],function(){var M;if(H.Get()===""||I.Get()==="")a.alert("You must enter a value in every option!");else{M=v.Parse(H.Get());(new l.New()).Send("Task3XKQCNV:Task3XKQCNV.Server.AddWeight:38517317",[A.Get(),w.toInt(a.Number(I.Get())),M]);a.alert("Weight logged!");L.__UpdateData(50,function(){return a.Number(I.Get());});}})])];})))])]);};f.timeNow=function(){g.$cctor();return g.timeNow;};g.$cctor=function(){g.$cctor=a.ignore;g.timeNow=x.now();};z.OnLoad(function(){f.Main();});}());
